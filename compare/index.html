<!DOCTYPE html>
<html ng-app="compareApp">
<head>
  <title>BackstopJS Report</title>

  <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="bower_components/twentytwenty/twentytwenty.css">
  <link rel="stylesheet" href="bower_components/ngprogress/ngProgress.css">
  <link rel="stylesheet" type="text/css" href="css/styles.css">

  <script type="text/javascript" src="bower_components/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
  <script type="text/javascript" src="bower_components/angular-route/angular-route.min.js"></script>
  <script type="text/javascript" src="bower_components/fsm-sticky-header/fsm-sticky-header.js"></script>
  <script type="text/javascript" src="bower_components/resemblejs/resemble.js"></script>
  <script type="text/javascript" src="bower_components/async/lib/async.js"></script>
  <script type="text/javascript" src="bower_components/completely/completely.js"></script>
  <script type="text/javascript" src="bower_components/twentytwenty/jquery.twentytwenty.js"></script>
  <script type="text/javascript" src="bower_components/twentytwenty/jquery.event.move.js"></script>
  <script type="text/javascript" src="bower_components/ngprogress/ngprogress.min.js"></script>
  <script type="text/javascript" src="js/compare.js"></script>
</head>

<body ng-controller="MainCtrl" ng-class="{'is-running': testRunning == true}">

  <a class="anchor" id="root"></a>
  <div>

    <header class="header" ng-include="'js/views/header.html'"></header>
    <div class="running-command">{{runningCommand}}</div>
    <div id="runningBlock">  
      <code>
        <div ng-repeat="output in backstopStdout track by $index">
          {{output}}
        </div>
      </code>
    </div>
    <div class="phalanx-dude">
      <!-- <div class="running-progress fade-in" ng-show="prepStage || scenarioStage || compareStage">
        <div class="fade-in" ng-show="prepStage">Preparing Tests!<br>Please be patient.</div>
        <div class="fade-in" ng-show="scenarioStage">Visiting urls and taking screenshots!</div>
        <div class="fade-in" ng-show="compareStage">Comparing screenshots to baseline references!</div>
      </div> -->
      <svg ng-show="prepStage || scenarioStage || compareStage" class="fade-in" width="374px" height="548px" viewBox="0 0 374 548" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <!-- Generator: Sketch 3.6.1 (26313) - http://www.bohemiancoding.com/sketch -->
        <title>Combined Shape</title>
        <desc>Created with Sketch.</desc>
        <defs></defs>
        <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
            <path d="M299.990769,230.910918 L365.992188,204.210938 L373.878906,120.753906 L370.992188,56 L323.726562,100.566406 L193,150.277344 L193,340.011719 L221.894531,321.043322 L221.894531,250.921875 L250,244.268959 L250,255 L295.796875,247.554688 L299.990769,230.910918 Z M77.293437,232.038811 L8.50390625,204.210938 L0.6171875,120.753906 L3.50390625,56 L50.7695313,100.566406 L181.496094,150.277344 L181.496094,340.011719 L152.601562,321.043322 L152.601562,250.921875 L127,244.861665 L127,255 L81.203125,247.554688 L77.293437,232.038811 Z M187,140.535772 L55.7070312,92.1640625 L33.1835938,67.9023438 L181,0 L187.083984,0 L193.167969,0 L340.984375,67.9023438 L318.460938,92.1640625 L187.167969,140.535772 L187.167969,140.597656 L187.083984,140.566714 L187,140.597656 L187,140.535772 Z M34.4202014,161.397682 L134.8248,197.941967 L142.301225,211.304941 L41.1941069,174.50496 L34.4202014,161.397682 Z M24.4202014,128.699219 L124.8248,165.243504 L132.301225,178.606478 L31.1941069,141.806496 L24.4202014,128.699219 Z M340.075892,161.397682 L239.671294,197.941967 L232.194868,211.304941 L333.301987,174.50496 L340.075892,161.397682 Z M350.075892,128.699219 L249.671294,165.243504 L242.194868,178.606478 L343.301987,141.806496 L350.075892,128.699219 Z M9.42773438,218.053711 L27.7080078,366.048828 L79.328125,437.077148 L58.6396484,269.641602 L43.3222656,232.923828 L9.42773438,218.053711 Z M364.900391,218 L346.620117,365.995117 L295,437.023438 L315.688477,269.587891 L331.005859,232.870117 L364.900391,218 Z M70.8964844,275 L92.8808594,455.509766 L159.6875,547.134766 L170.449219,547.134766 L134.035156,288.798828 L70.8964844,275 Z M303.599609,275 L281.615234,455.509766 L214.808594,547.134766 L204.046875,547.134766 L240.460938,288.798828 L303.599609,275 Z" id="Combined-Shape"></path>
        </g>
      </svg>
    </div>


  <div class="filterGroup form-group subheader">
    <div class="row">
      <div class="col-md-1">
        <label for="statusFilter" class="control-label">status</label>
        <select id="statusFilter" class="form-control" ng-model="statusFilter" ng-options="status for status in detailFilterOptions"></select>
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <label for="directoryFilter">filter</label>
          <div completely id="directoryFilter" suggestions="directories"></div>  
        </div>
      </div>
      <div class="col-md-2">
        <div class="filter-length"><span>showing</span> <strong>{{filtered.length}}</strong> <span>of</span> <strong>{{testPairs.length}}</strong></div>
      </div>
      <div class="col-md-4">
        <div class="stat" ng-if=displayMode>{{testPairsCompleted}} of {{testPairs.length}}</div>
        <div class="stat" ng-if=displayMode>{{testDuration/1000 | number : 2}}s</div>
        <div class="progressBarBlock" ng-if="testIsRunning">
          <div class="progress">
            <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="{{testPairsCompleted}}" aria-valuemin="0" aria-valuemax="{{testPairs.length}}" style="width: {{testPairsCompleted/testPairs.length*100| number : 0}}%">
              <span class="sr-only">{{testPairsCompleted}} of {{testPairs.length}}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-2 text-right logo-container">
      </div>
    </div>
    <div class="row" ng-show="selection.length">
      <div class="col-md-12 command-container">
        <div class="text-right">              
          <!--<button class="btn btn-lg btn-primary" ng-click="createBaseline()">create baselines</button>-->
          <div><code>{{ gulpCommand }}</code></div>
        </div>
      </div>
    </div>
  </div>
    <div class="summaryBlock">


      
      <div class="summary-list-container">
        <table class="summaryList">
        <thead>
          <tr>
            <th class="statusInds"><h3>Summary</h3></th>
            <th><a class="btn btn-primary" href="#/running/{{testNames}}">Run Test</a></th>
            <th class="baseline">
              <div class="baseline-header pull-right">
                <!-- <span>select to create new baseline</span> <i class="fa fa-long-arrow-down"></i> -->
              </div>
              
              <div class="test-all-checkbox pull-right">
                <label for="toggleAll">select all viewable</label>
                <input type="checkbox"
                  id="toggleAll" 
                  ng-model="allToggled"
                  ng-checked="filtered.length/3 == selection.length" 
                  ng-click="toggleAllViewable(filtered, allToggled)" />
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="thisTestPair in testPairs | filter : displayOnStatusFilter | filter : directoryFilter as filtered">
            <td class="statusInds">
              <div class="scanning" ng-if="thisTestPair.processing"><span class="dot yellow flash"></span>scanning</div>
              <div class="failed" ng-if="thisTestPair.testStatus=='fail'&&!thisTestPair.processing"><div class="stat-label">failed</div></div>
              <div class="passed" ng-if="thisTestPair.testStatus=='pass'"><div class="stat-label">passed</div></div>
              <div class="blessed" ng-if="thisTestPair.testStatus=='blessed'"><div class="stat-label">blessed</div></div>
            </td>
            <td class="test-summary">
              <test-result-summary></test-result-summary>
            </td>
            <td class="baseline">
              <baseline-checkbox></baseline-checkbox>
            </td>
          </tr>
        </tbody>
        </table>
      </div>
    </div> <!-- end summaryBlock -->

    <div class="detailReport fade-in">
    <h3>Details</h3>
    <div class="detail-container">
      <div class="detail" ng-repeat="thisTestPair in testPairs | filter : displayOnStatusFilter | filter : directoryFilter ">
      <a class="anchor" id="{{ thisTestPair.meta.fileName | anchor }}"></a>
      <table class="detail-images" id="{{thisTestPair.meta.label + $index}}">
        <thead fsm-sticky-header scroll-body="{{'#' + thisTestPair.meta.label + $index}}" scroll-stop="40">
          <tr>
            <th class="detail-topper" colspan="3">
              <table>
                <thead>
                  <tr>
                    <th class="statusInds">
                      <div class="failed" ng-if="thisTestPair.testStatus=='fail'&&!thisTestPair.processing"><div class="stat-label">failed</div></div>
                      <div class="passed" ng-if="thisTestPair.testStatus=='pass'"><div class="stat-label">passed</div></div>
                      <div class="blessed" ng-if="thisTestPair.testStatus=='blessed'"><div class="stat-label">blessed</div></div>
                    </th>
                    <th class="selector">
                      <test-result-summary></test-result-summary>              
                      {{msg}}
                    </th>
                    <th class="baseline">
                      <baseline-checkbox></baseline-checkbox>
                    </th>
                  </tr>
                </thead>
              </table>
            </td>
          </tr>
          <tr>
            <th class="reference">
              <span class="detail-images-label">Baseline Reference</span>
              <span ng-hide="thisTestPair.passed">
                <span class="btn btn-xs btn-diff" ng-click="slideDiff('#' + thisTestPair.meta.label + $index + '-compare')">
                  <i class="fa fa-eye"></i> activate visual slide diff
                </span>
                <small class="bless-help"><em></em></small>
              </span>
            </th>
            <th>
              <span class="detail-images-label">Test</span> 
              <span ng-hide="thisTestPair.passed">
                <span class="btn btn-primary btn-xs" ng-click="bless(thisTestPair.b.src, $index)"><i class="fa fa-thumbs-up"></i> bless</span>
                <small class="bless-help"><em>(make this the new baseline reference)</em></small>
              </span>
            </th>
            <th><span class="detail-images-label">Diff</span></th>
          </tr>
        </thead>
        <tr>
          <td class="reference">
            <div id="{{thisTestPair.meta.label + $index + '-compare'}}" class="visual-diff-container">
              <img ng-src="{{ thisTestPair.a.src }}">
              <img ng-src="{{ thisTestPair.b.src }}">  
            </div>
          </td>
          <td>
            <img ng-src="{{ thisTestPair.b.src }}">
          </td>
          <td>
            <img ng-src="{{ thisTestPair.c.src }}" image-name="c">
          </td>
        </tr>
      </table>
      </div>
    </div>

    </div> <!-- end detailReport -->


  <footer class="footer text-right">
    <span class="btn btn-primary back-to-top" ng-click="scrollTo('root')">top <i class="fa fa-chevron-up"></i></span>
  </footer>

  </div> <!-- end #root -->

</body>
</html>
